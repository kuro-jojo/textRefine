<div class="flex flex-col bg-white rounded-xl shadow-lg py-7 px-6 mb-2">
    <div
        class="flex flex-col md:flex-row items-start md:items-center justify-between mb-4"
    >
        <h2 class="text-lg font-semibold text-gray-800 mb-2 md:mb-0">
            Overall Performance
        </h2>
        <div
            class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"
        >
            {{ score ? getScoreText(score) : "N/A" }}
        </div>
    </div>
    <div class="flex flex-col md:flex-row items-center gap-10">
        <div
            class="flex items-center justify-center w-40 h-40 relative mb-4 md:mb-0 md:mr-6"
        >
            <div class="relative">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-40 h-40">
                    <circle
                        cx="80"
                        cy="80"
                        r="60"
                        stroke="#E5E7EB"
                        stroke-width="8"
                        fill="none"
                    ></circle>
                    <circle
                        cx="80"
                        cy="80"
                        r="60"
                        stroke="#6366F1"
                        stroke-width="12"
                        fill="none"
                        [attr.stroke-dasharray]="
                            getOverallScoreSvgPercentage(60)[0]
                        "
                        [attr.stroke-dashoffset]="
                            getOverallScoreSvgPercentage(60)[1]
                        "
                        stroke-linecap="round"
                        transform="rotate(-90 80 80)"
                    ></circle>
                </svg>

                <span
                    class="absolute inset-0 flex items-center justify-center text-7xl md:text-6xl font-bold text-indigo-600"
                >
                    {{ getScoreInPercentage(score) }}
                </span>
            </div>
        </div>
        <div class="flex-grow">
            <div class="mt-4 text-stone-600 mb-4 space-y-2 border-2 border-indigo-600 rounded-lg w-fit p-4">
                @if (feedback) {
                    @for (sentence of feedback.split('.'); track $index) {
                        @if (sentence) {
                            <p class="text-sm lg:text-base">{{sentence}}.</p>
                        }
                    }
                } @else {
                    <p class="text-sm lg:text-base">
                        Your text demonstrates {{score ? getScoreText(score).toLowerCase() : 'N/A'}} grammar and vocabulary with good readability.
                    </p>
                }
            </div>
            <p class="text-sm text-slate-900 italic font-semibold">
                Consider the suggestions in the coherence tab to improve your writing.
            </p>
            <div class="flex flex-wrap gap-2">
                <span
                    class="{{ sophisticationColor }} px-3 py-1 rounded-full text-sm"
                >
                    {{ sophisticationLevel || "N/A" }}
                </span>
                <span
                    class="bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm"
                >
                    {{ wordCount }} words
                </span>
                <span
                    class="bg-teal-400 text-white px-3 py-1 rounded-full text-sm"
                >
                    {{ rareWordCount }} rare words
                </span>
            </div>
        </div>
    </div>
</div>
